# AI 二手物價值評估系統 - 開發階段表

## 📋 專案概述

**專案名稱：** AI 二手物價值評估系統  
**技術棧：** Flask + YOLOv8 + BeautifulSoup + Scikit-learn  
**開發時程：** 2 天速成計畫

---

## 🎯 開發階段規劃

### ✅ 階段一：環境設定與專案架構 (已完成)

**目標：** 建立專案基礎結構和依賴管理

- [x] 建立 `requirements.txt` 依賴清單
- [x] 建立專案目錄結構
- [x] 設定 `.gitignore` 檔案
- [x] 建立 `README.md` 說明文件

**交付物：**
- `requirements.txt`
- 專案目錄結構
- `.gitignore`
- `README.md`

---

### ✅ 階段二：YOLO 影像辨識模組 (已完成)

**目標：** 實作物品影像辨識功能

- [x] 建立 `predict.py` 模組
- [x] 實作 `YOLOPredictor` 類別
- [x] 整合 YOLOv8 預訓練模型
- [x] 實作圖片預測功能
- [x] 實作標註圖片產生功能

**技術細節：**
- 使用 `ultralytics` 庫載入 `yolov8n.pt`
- 支援信心度閾值設定
- 自動選擇信心度最高的物品

**交付物：**
- `predict.py`

---

### ✅ 階段三：資料獲取引擎 (已完成)

**目標：** 實作價格資料獲取功能

- [x] 建立 `data_engine.py` 模組
- [x] 實作 `DataEngine` 類別
- [x] 建立模擬資料產生功能
- [x] 實作模擬資料查詢功能
- [x] 預留爬蟲功能介面

**技術細節：**
- 預設使用模擬資料（避免爬蟲被封鎖）
- 自動產生 `mock_data.csv`
- 支援模糊匹配物品名稱
- 可擴展為實際爬蟲功能

**交付物：**
- `data_engine.py`
- `mock_data.csv` (自動產生)

---

### ✅ 階段四：機器學習模組 (已完成)

**目標：** 實作價格分析和預測功能

- [x] 建立 `model.py` 模組
- [x] 實作 `PriceAnalyzer` 類別
- [x] 實作 K-Means 價格分群功能
- [x] 實作 Decision Tree 價格預測功能
- [x] 實作分群視覺化功能
- [x] 實作模型評估指標

**技術細節：**
- K-Means 分群：將價格分為 3 個區間（低價、中價、高價）
- Decision Tree：根據狀況和保固月數預測價格
- 使用 scikit-learn 套件
- 產生視覺化圖表

**交付物：**
- `model.py`

---

### ✅ 階段五：資料庫設計與實作 (已完成)

**目標：** 建立資料儲存機制

- [x] 設計 SQLite 資料庫結構
- [x] 實作資料庫初始化功能
- [x] 實作評估記錄儲存功能
- [x] 建立資料庫查詢功能

**資料庫欄位：**
- `id`: 紀錄編號 (Integer, Primary Key)
- `item_name`: 物品名稱 (String)
- `user_condition`: 外觀狀況 (Integer, 1-5)
- `warranty_months`: 保固剩餘月數 (Integer)
- `pred_price`: 建議售價 (Float)
- `confidence`: 辨識信心度 (Float)
- `created_at`: 查詢時間 (DateTime)

**交付物：**
- 資料庫初始化程式碼（在 `app.py` 中）
- `app.db` (執行時自動產生)

---

### ✅ 階段六：Flask 後端整合 (已完成)

**目標：** 建立完整的後端 API 和路由

- [x] 建立 `app.py` 主應用程式
- [x] 實作首頁路由 (`/`)
- [x] 實作檔案上傳處理 (`/upload`)
- [x] 實作結果頁面路由 (`/result`)
- [x] 實作歷史記錄路由 (`/history`)
- [x] 整合所有模組功能
- [x] 實作錯誤處理機制

**路由設計：**
- `GET /`: 首頁（上傳介面）
- `POST /upload`: 處理圖片上傳和評估
- `GET /result`: 顯示評估結果
- `GET /history`: 顯示歷史記錄

**交付物：**
- `app.py`

---

### ✅ 階段七：前端介面開發 (已完成)

**目標：** 建立使用者友善的網頁介面

- [x] 建立 `templates/index.html` 首頁
- [x] 建立 `templates/result.html` 結果頁
- [x] 建立 `templates/history.html` 歷史記錄頁
- [x] 實作響應式設計
- [x] 實作圖片上傳預覽功能
- [x] 實作拖曳上傳功能
- [x] 美化 UI 介面

**功能特色：**
- 現代化漸層設計
- 響應式佈局
- 圖片預覽功能
- 拖曳上傳支援
- 友善的使用者體驗

**交付物：**
- `templates/index.html`
- `templates/result.html`
- `templates/history.html`

---

### 🔄 階段八：整合測試與優化 (進行中)

**目標：** 確保系統穩定運作並優化效能

- [ ] 測試 YOLO 辨識功能
- [ ] 測試資料獲取功能
- [ ] 測試 ML 模型預測
- [ ] 測試完整流程
- [ ] 優化錯誤處理
- [ ] 效能優化
- [ ] 使用者體驗優化

**測試項目：**
1. 上傳不同類型的圖片
2. 測試各種物品辨識
3. 驗證價格預測準確度
4. 檢查資料庫儲存功能
5. 測試錯誤處理機制

---

## 📊 進度總覽

| 階段 | 狀態 | 完成度 |
|------|------|--------|
| 階段一：環境設定 | ✅ 已完成 | 100% |
| 階段二：YOLO 模組 | ✅ 已完成 | 100% |
| 階段三：資料引擎 | ✅ 已完成 | 100% |
| 階段四：ML 模組 | ✅ 已完成 | 100% |
| 階段五：資料庫 | ✅ 已完成 | 100% |
| 階段六：Flask 後端 | ✅ 已完成 | 100% |
| 階段七：前端介面 | ✅ 已完成 | 100% |
| 階段八：測試優化 | 🔄 進行中 | 0% |

**整體進度：** 87.5% (7/8 階段完成)

---

## 🚀 快速開始

### 1. 安裝依賴
```bash
pip install -r requirements.txt
```

### 2. 執行應用程式
```bash
python app.py
```

### 3. 開啟瀏覽器
訪問 `http://localhost:5000`

---

## 📝 後續優化建議

1. **爬蟲功能實作**
   - 實作實際的拍賣網站爬蟲
   - 處理反爬蟲機制
   - 加入請求延遲和重試機制

2. **模型優化**
   - 調整 K-Means 分群數量
   - 優化 Decision Tree 參數
   - 加入更多特徵（品牌、型號等）

3. **功能擴展**
   - 支援多物品辨識
   - 加入價格趨勢分析
   - 實作使用者帳號系統

4. **效能優化**
   - 圖片快取機制
   - 非同步處理
   - 資料庫索引優化

---

## 📅 時程規劃

### Day 1: 核心後端與 AI 模組 ✅
- [x] 環境安裝
- [x] YOLO 模組開發
- [x] 資料獲取模組開發
- [x] ML 模組開發

### Day 2: Flask 整合與報告 ✅
- [x] Flask 路由開發
- [x] 前端介面開發
- [x] 資料庫整合
- [ ] 系統測試
- [ ] 報告撰寫

---

## 🎓 技術重點回顧

### 已涵蓋的課程技術

1. **Flask 框架** ✅
   - 路由設計
   - 檔案上傳處理
   - 模板渲染
   - 資料庫整合

2. **YOLOv8 影像辨識** ✅
   - 預訓練模型使用
   - 物件偵測
   - 圖片標註

3. **Web Scraping** ✅
   - BeautifulSoup 整合
   - 模擬資料產生
   - 資料處理

4. **Decision Tree** ✅
   - 回歸預測
   - 模型訓練
   - 特徵工程

5. **Clustering (K-Means)** ✅
   - 價格分群
   - 視覺化
   - 群集分析

---

**最後更新：** 2024年

